# Persistent Volume Claims for Langfuse StatefulSets
#
# These PVCs are auto-created by StatefulSet volumeClaimTemplates during helm install.
# The sizes below match the helm values. If you need to expand later,
# use kubectl patch (requires StorageClass with allowVolumeExpansion: true).

# ============================================================
# ClickHouse PVC - 200Gi on gp3
# ============================================================
# To expand later:
#   kubectl patch pvc data-langfuse-clickhouse-shard0-0 -n langfuse \
#     -p '{"spec": {"resources": {"requests": {"storage": "400Gi"}}}}'
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: data-langfuse-clickhouse-shard0-0
  namespace: langfuse
  labels:
    app.kubernetes.io/component: clickhouse
    app.kubernetes.io/instance: langfuse
    app.kubernetes.io/name: clickhouse
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: gp3
  volumeMode: Filesystem
  resources:
    requests:
      storage: 200Gi

# ============================================================
# PostgreSQL PVC - 20Gi on gp2
# ============================================================
# To expand later:
#   kubectl patch pvc data-langfuse-postgresql-0 -n langfuse \
#     -p '{"spec": {"resources": {"requests": {"storage": "50Gi"}}}}'
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: data-langfuse-postgresql-0
  namespace: langfuse
  labels:
    app.kubernetes.io/component: primary
    app.kubernetes.io/instance: langfuse
    app.kubernetes.io/name: postgresql
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: gp2
  volumeMode: Filesystem
  resources:
    requests:
      storage: 20Gi

# ============================================================
# Redis (Valkey) PVC - 2Gi on gp2
# ============================================================
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: valkey-data-langfuse-redis-primary-0
  namespace: langfuse
  labels:
    app.kubernetes.io/component: primary
    app.kubernetes.io/instance: langfuse
    app.kubernetes.io/name: redis
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: gp2
  volumeMode: Filesystem
  resources:
    requests:
      storage: 2Gi
